<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en-GB">
<head>
    <title>Lines</title>
    <link rel="stylesheet" th:href="@{/css/admin.css}">
    <link rel="stylesheet" th:href="@{/css/admin_modern.css}">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%23667eea'/><text x='50' y='70' font-size='60' text-anchor='middle' font-weight='800' fill='white'>V</text></svg>">
</head>
<body>

<div class="sidebar">
    <h2>Admin</h2>
    <a href="/user/login_success">Back to Home</a>
    <a href="/admin">Users</a>
    <a href="/stations">Stations</a>
    <a href="/lines" class="active">Lines</a>
    <a href="/buses">Buses</a>
    <a th:href="@{/admin/sales-points}">Sales Points</a>

    <form th:action="@{/logout}" method="post" class="logout-form">
        <button type="submit" class="sidebar-link">Logout</button>
    </form>
</div>

<div class="content">

    <h1>Line Management</h1>

    <form method="post" class="form-card">

        <h3>Add Line</h3>

        <div class="form-row">
            <div class="field">
                <label>Line Number</label>
                <input type="text" name="lineNumber" required>
            </div>

            <div class="field">
                <label>Name</label>
                <input type="text" name="name" required>
            </div>
        </div>

        <button type="submit" class="btn">Add Line</button>
    </form>

    <form method="get" action="/lines/search" class="form-card">
        <h3>Search Line</h3>

        <div class="form-row">
            <div class="field">
                <label>Line number or name</label>
                <input type="text" name="q"
                       placeholder="e.g. 10, Split, Solin"
                       th:value="${query}">
            </div>
        </div>

        <button type="submit" class="btn">Search</button>

        <div style="margin-top:10px">
            <a href="/lines">Clear search</a>
        </div>
    </form>

    <table class="styled-table">
        <thead>
        <tr>
            <th>ID</th>
            <th>Number</th>
            <th>Name</th>
            <th>Actions</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="l : ${lines}">
            <td th:text="${l.id}"></td>
            <td th:text="${l.lineNumber}"></td>
            <td th:text="${l.name}"></td>
            <td>
                <a th:href="@{'/lines/edit/' + ${l.id}}" class="btn-small">Edit</a>
                <a th:href="@{'/lines/delete/' + ${l.id}}" class="btn-small btn-danger">Delete</a>
                <a th:href="@{'/lines/' + ${l.id} + '/route'}" class="btn-small">Route</a>
            </td>
        </tr>
        </tbody>
    </table>

</div>

</body>
</html>
